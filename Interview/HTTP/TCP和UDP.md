# TCP 和 UDP

## UDP（用户数据报协议）

> `面向数据报的通用协议`，是一种无连接的协议，提供不可靠的数据传输。即对应用层交下来的报文不进行处理，只加上相应的首部就进行传输，不保证数据的可靠性和顺序性
> 不提供错误检测、重传机制或拥塞控制等功能，因此更轻量级，传输速度更快。

- 特点

  1. 无可靠链接、传输速度更快
  2. 传输过程中出现丢包，也不负责重发
  3. 当包出现的顺序混乱时，也不负责
  4. 当 UDP 协议接收到程序发来的报文后，会立即按原样进行发送。即使出现网络拥堵的情况，也不会流量控制等避免网络拥塞行为
  5.

- 应用
  > 适用于对传输速度高的、实时性高的场景
  1. 视频会议、在线游戏
  2. DNS 域名系统

## TCP（传输控制协议）

> TCP 是一种面向连接的协议，提供可靠的数据传输。它负责将数据分割成数据包并在网络上传输，然后在目标处重新组装
> TCP 提供了错误检测、重传机制、拥塞控制等功能，以确保数据的完整性和可靠性。
> TCP 是基于流的协议，数据传输的顺序会被维护

- 特点
  1. 可靠的数据传输、能保证数据的顺序性和完整性
  2. 提供可靠的数据传输，需要二者建立连接后才能传输（三次握手、四次挥手）
  3. 拥有错误检测、重传、拥塞堵塞等功能
- 应用
  1. 网页浏览
  2. 邮件发送
  3. 文件传输

## TCP 和 UDP 的区别

1. TCP 面向连接（TCP 三次握手），UDP 是无连接的，即发送数据之前不需要建立连接。
2. TCP 面向字节流，实际上是 TCP 把数据看成一连串无结构的字节流；UDP 是面向报文的
3. TCP 有序，UDP 无序；消息在传输过程中可能会乱序，TCP 会对其进行重排序，UDP 不会
4. TCP 传输速率慢。由于传输要进行三次握手，以及会进行拥塞控制等。
5. 每一条 TCP 连接只能是点到点的；UDP 支持一对一，一对多，多对一和多对多的交互通信
6. TCP 有流量控制（拥塞控制），UDP 没有。

## TCP 如何保障可靠的

1. 连接正常。三次握手、四次挥手
2. 流量控制（滑动窗口）
   > 所谓流量控制就是让发送方的发送速率不要太快，要让接收方来得及接收。
   > 通过滑动窗口控制的。发送方和接收方都维护着一个最大窗口，保证数据的发送不会过快
3. 拥塞控制算法(慢启动、拥塞避免、快速重传和快速恢复)
   1. 慢启动。避免一下发送数据太多
   2. 拥塞避免。当网络出现波动的时候，会自动降低发送流量。特别容易丢包
      1. 快速重传
      2. 快速恢复
4. 重传机制
   确保丢失的数据包被重新发送
   1. 超时重传
   2. 快速重传
5. 数据校验。端到端的检验和，保证发送端和接收端的数据量是一样大的
